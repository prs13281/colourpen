<div class="container">
  <div class="row">
    <div class="col-md-5">
      <h2><%= @post.title %></h2></br>
      <%= link_to user_path(@user.id), class: 'btn btn-outline-dark btn-block' do %>
        <%= @user.name %></br>
      <% end %>
      <%= image_tag @post.get_image(300,300) %></br>
      <!--タグの表示-->
        <%= @post.tags.pluck(:name) %>
      <!--お気に入りに追加するボタン表示-->
  <div id="favorite_<%= @post.id %>">
    <% if favorite = @post.favorites.find_by(user_id: current_user.id) %>
      <%= link_to "お気に入り済", favorite_path(favorite.id), remote:true, method: :delete, style: "color: red;" %>
    <% else %>
      <%= link_to "お気に入り", favorites_path(post_id: @post), remote:true, method: :post %>
    <% end %>
    <%= @post.favorites.size %>
  </div>
      <div style="width: 70%;", class="ml-1" id="comment_list">
      <!--コメントとコメントした人表示-->
        <%= render "user/comments/comment_list", comments: @comments %>
      </div>
      <div style = "width: 30%;", class="ml-2">
      <%= form_with model: [@post,@comment], url:post_comments_path(@post), local: false do |f| %>
        <%= f.text_field :comment, autofocus: true, placeholder: "コメント", class:'form-control' %>
        <%= f.submit "コメントする", class:'btn btn-outline-primary' %>
      <% end %>
      </div>
    </div>
    <div class = "offset-1 col-md-5">
    <%= link_to "編集", edit_post_path(post_id: @post), class:'btn btn-outline-primary'%>
      <p>絶景ポイント</p>
      <%= @post.introduction %></br>
      <div id='map'></div>
        <style>
        #map {
          height: 230px;
          width: 350px;
        }
        </style>
        <script>
        let map
    function initMap(){
          geocoder = new google.maps.Geocoder()

          // map表示
          map = new google.maps.Map(document.getElementById('map'), {
            // 緯度経度をgon(というgem)でjavascriptとrailsを連携させて、データを受け取り表示
            center: {lat: Number(gon.lat), lng: Number(gon.lng) },
            zoom: 12,
          });

          // mapの赤いピンの表示
          marker = new google.maps.Marker({
            position: {lat: Number(gon.lat), lng: Number(gon.lng) },
            map: map
          });
        }
        let geocoder

        </script>
        <script src="https://maps.google.com/maps/api/js?key=<%= ENV['SECRET_KEY'] %>&callback=initMap&language=ja"></script>
      </div>
  </div>
  <div class="row">
  </div>
</div>

<!--<h1>User::Post#show</h1>-->
<!--<p>Find me in app/views/user/post/show.html.erb</p>-->
